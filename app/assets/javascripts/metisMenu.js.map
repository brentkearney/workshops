{"version":3,"file":"metisMenu.js","sources":["../src/util.js","../src/index.js"],"sourcesContent":["import $ from 'jquery';\n\nconst Util = (($) => { // eslint-disable-line no-shadow\n  const TRANSITION_END = 'transitionend';\n\n  const Util = { // eslint-disable-line no-shadow\n    TRANSITION_END: 'mmTransitionEnd',\n\n    triggerTransitionEnd(element) {\n      $(element).trigger(TRANSITION_END);\n    },\n\n    supportsTransitionEnd() {\n      return Boolean(TRANSITION_END);\n    },\n  };\n\n  function getSpecialTransitionEndEvent() {\n    return {\n      bindType: TRANSITION_END,\n      delegateType: TRANSITION_END,\n      handle(event) {\n        if ($(event.target).is(this)) {\n          return event\n            .handleObj\n            .handler\n            .apply(this, arguments); // eslint-disable-line prefer-rest-params\n        }\n        return undefined;\n      },\n    };\n  }\n\n  function transitionEndEmulator(duration) {\n    let called = false;\n\n    $(this).one(Util.TRANSITION_END, () => {\n      called = true;\n    });\n\n    setTimeout(() => {\n      if (!called) {\n        Util.triggerTransitionEnd(this);\n      }\n    }, duration);\n\n    return this;\n  }\n\n  function setTransitionEndSupport() {\n    $.fn.mmEmulateTransitionEnd = transitionEndEmulator; // eslint-disable-line no-param-reassign\n    // eslint-disable-next-line no-param-reassign\n    $.event.special[Util.TRANSITION_END] = getSpecialTransitionEndEvent();\n  }\n\n  setTransitionEndSupport();\n\n  return Util;\n})($);\n\nexport default Util;\n","import $ from 'jquery';\nimport Util from './util';\n\nconst NAME = 'metisMenu';\nconst DATA_KEY = 'metisMenu';\nconst EVENT_KEY = `.${DATA_KEY}`;\nconst DATA_API_KEY = '.data-api';\nconst JQUERY_NO_CONFLICT = $.fn[NAME];\nconst TRANSITION_DURATION = 350;\n\nconst Default = {\n  toggle: true,\n  preventDefault: true,\n  triggerElement: 'a',\n  parentTrigger: 'li',\n  subMenu: 'ul',\n};\n\nconst Event = {\n  SHOW: `show${EVENT_KEY}`,\n  SHOWN: `shown${EVENT_KEY}`,\n  HIDE: `hide${EVENT_KEY}`,\n  HIDDEN: `hidden${EVENT_KEY}`,\n  CLICK_DATA_API: `click${EVENT_KEY}${DATA_API_KEY}`,\n};\n\nconst ClassName = {\n  METIS: 'metismenu',\n  ACTIVE: 'mm-active',\n  SHOW: 'mm-show',\n  COLLAPSE: 'mm-collapse',\n  COLLAPSING: 'mm-collapsing',\n  COLLAPSED: 'mm-collapsed',\n};\n\nclass MetisMenu {\n  // eslint-disable-line no-shadow\n  constructor(element, config) {\n    this.element = element;\n    this.config = { ...Default, ...config };\n    this.transitioning = null;\n\n    this.init();\n  }\n\n  init() {\n    const self = this;\n    const conf = this.config;\n\n    $(this.element).addClass(ClassName.METIS); // add metismenu class to element\n\n    $(this.element)\n      .find(`${conf.parentTrigger}.${ClassName.ACTIVE}`)\n      .children(conf.triggerElement)\n      .attr('aria-expanded', 'true'); // add attribute aria-expanded=true the trigger element\n\n    $(this.element)\n      .find(`${conf.parentTrigger}.${ClassName.ACTIVE}`)\n      .parents(conf.parentTrigger)\n      .addClass(ClassName.ACTIVE);\n\n    $(this.element)\n      .find(`${conf.parentTrigger}.${ClassName.ACTIVE}`)\n      .parents(conf.parentTrigger)\n      .children(conf.triggerElement)\n      .attr('aria-expanded', 'true'); // add attribute aria-expanded=true the triggers of all parents\n\n    $(this.element)\n      .find(`${conf.parentTrigger}:not(:has(${conf.subMenu}))`)\n      .children(conf.triggerElement)\n      .on(Event.CLICK_DATA_API, function () { // eslint-disable-line func-names\n        const eTar = $(this);\n        const parentTar = eTar.parents(conf.parentTrigger).last()[0];\n        if (eTar.parent(conf.parentTrigger).hasClass(ClassName.ACTIVE)) {\n          return;\n        }\n        eTar.parent(conf.parentTrigger).addClass(ClassName.ACTIVE);\n        eTar.parents(`${conf.subMenu}.${ClassName.METIS}`).children(`${conf.parentTrigger}.${ClassName.ACTIVE}:not(:has(${conf.subMenu}.${ClassName.SHOW}.${ClassName.COLLAPSED}:has(${conf.parentTrigger}.${ClassName.ACTIVE})))`).not(parentTar).children(conf.triggerElement)\n          .attr('aria-expanded', 'false');\n        eTar.parents(`${conf.subMenu}.${ClassName.METIS}`).children(`${conf.parentTrigger}.${ClassName.ACTIVE}:not(:has(${conf.subMenu}.${ClassName.SHOW}.${ClassName.COLLAPSED}:has(${conf.parentTrigger}.${ClassName.ACTIVE})))`).not(parentTar).children(conf.subMenu)\n          .removeClass(ClassName.SHOW);\n        eTar.parents(`${conf.subMenu}.${ClassName.METIS}`).children(`${conf.parentTrigger}.${ClassName.ACTIVE}:not(:has(${conf.subMenu}.${ClassName.SHOW}.${ClassName.COLLAPSED}:has(${conf.parentTrigger}.${ClassName.ACTIVE})))`).not(parentTar).removeClass(ClassName.ACTIVE);\n      });\n\n    $(this.element)\n      .find(`${conf.parentTrigger}.${ClassName.ACTIVE}`)\n      .has(conf.subMenu)\n      .children(conf.subMenu)\n      .addClass(`${ClassName.COLLAPSE} ${ClassName.SHOW}`);\n\n    $(this.element)\n      .find(conf.parentTrigger)\n      .not(`.${ClassName.ACTIVE}`)\n      .has(conf.subMenu)\n      .children(conf.subMenu)\n      .addClass(ClassName.COLLAPSE);\n\n    $(this.element)\n      .find(conf.parentTrigger)\n      .has(conf.subMenu)\n      .children(conf.triggerElement)\n      .on(Event.CLICK_DATA_API, function (e) { // eslint-disable-line func-names\n        const eTar = $(this);\n        const paRent = eTar.parent(conf.parentTrigger);\n        const sibLings = paRent\n          .siblings(conf.parentTrigger)\n          .children(conf.triggerElement);\n        const List = paRent.children(conf.subMenu);\n        if (conf.preventDefault) {\n          e.preventDefault();\n        }\n        if (eTar.attr('aria-disabled') === 'true') {\n          return;\n        }\n        if (paRent.hasClass(ClassName.ACTIVE)) {\n          eTar.attr('aria-expanded', 'false');\n          self.hide(List);\n        } else {\n          self.show(List);\n          eTar.attr('aria-expanded', 'true');\n          if (conf.toggle) {\n            sibLings.attr('aria-expanded', 'false');\n          }\n        }\n\n        if (conf.onTransitionStart) {\n          conf.onTransitionStart(e);\n        }\n      });\n  }\n\n  show(element) {\n    if (this.transitioning || $(element).hasClass(ClassName.COLLAPSING)) {\n      return;\n    }\n    const elem = $(element);\n\n    const startEvent = $.Event(Event.SHOW);\n    elem.trigger(startEvent);\n\n    if (startEvent.isDefaultPrevented()) {\n      return;\n    }\n\n    elem.parent(this.config.parentTrigger).addClass(ClassName.ACTIVE);\n\n    if (this.config.toggle) {\n      const toggleElem = elem.parent(this.config.parentTrigger).siblings().children(`${this.config.subMenu}.${ClassName.SHOW}:has(${this.config.parentTrigger}.${this.config.ACTIVE})`);\n      this.hide(toggleElem);\n    }\n\n    elem\n      .removeClass(ClassName.COLLAPSE)\n      .addClass(ClassName.COLLAPSING)\n      .height(0);\n\n    this.setTransitioning(true);\n\n    const complete = () => {\n      // check if disposed\n      if (!this.config || !this.element) {\n        return;\n      }\n      elem\n        .removeClass(ClassName.COLLAPSING)\n        .addClass(`${ClassName.COLLAPSE} ${ClassName.SHOW}`)\n        .height('');\n\n      this.setTransitioning(false);\n\n      elem.trigger(Event.SHOWN);\n    };\n\n    elem\n      .height(element[0].scrollHeight)\n      .one(Util.TRANSITION_END, complete)\n      .mmEmulateTransitionEnd(TRANSITION_DURATION);\n  }\n\n  hide(element) {\n    if (\n      this.transitioning || !$(element).hasClass(ClassName.SHOW)\n    ) {\n      return;\n    }\n\n    const elem = $(element);\n\n    const startEvent = $.Event(Event.HIDE);\n    elem.trigger(startEvent);\n\n    if (startEvent.isDefaultPrevented()) {\n      return;\n    }\n\n    elem.parent(this.config.parentTrigger).removeClass(ClassName.ACTIVE);\n    // eslint-disable-next-line no-unused-expressions\n    elem.height(elem.height())[0].offsetHeight;\n\n    elem\n      .addClass(ClassName.COLLAPSING)\n      .removeClass(ClassName.COLLAPSE)\n      .removeClass(ClassName.SHOW);\n\n    this.setTransitioning(true);\n\n    const complete = () => {\n      // check if disposed\n      if (!this.config || !this.element) {\n        return;\n      }\n      if (this.transitioning && this.config.onTransitionEnd) {\n        this.config.onTransitionEnd();\n      }\n\n      this.setTransitioning(false);\n      elem.trigger(Event.HIDDEN);\n\n      elem\n        .removeClass(ClassName.COLLAPSING)\n        .addClass(ClassName.COLLAPSE);\n    };\n\n    if (elem.height() === 0 || elem.css('display') === 'none') {\n      complete();\n    } else {\n      elem\n        .height(0)\n        .one(Util.TRANSITION_END, complete)\n        .mmEmulateTransitionEnd(TRANSITION_DURATION);\n    }\n  }\n\n  setTransitioning(isTransitioning) {\n    this.transitioning = isTransitioning;\n  }\n\n  dispose() {\n    $.removeData(this.element, DATA_KEY);\n\n    $(this.element)\n      .find(this.config.parentTrigger)\n      .has(this.config.subMenu)\n      .children(this.config.triggerElement)\n      .off('click');\n\n    this.transitioning = null;\n    this.config = null;\n    this.element = null;\n  }\n\n  static jQueryInterface(config) {\n    // eslint-disable-next-line func-names\n    return this.each(function () {\n      const $this = $(this);\n      let data = $this.data(DATA_KEY);\n      const conf = {\n        ...Default,\n        ...$this.data(),\n        ...(typeof config === 'object' && config ? config : {}),\n      };\n\n      if (!data) {\n        data = new MetisMenu(this, conf);\n        $this.data(DATA_KEY, data);\n      }\n\n      if (typeof config === 'string') {\n        if (data[config] === undefined) {\n          throw new Error(`No method named \"${config}\"`);\n        }\n        data[config]();\n      }\n    });\n  }\n}\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$.fn[NAME] = MetisMenu.jQueryInterface; // eslint-disable-line no-param-reassign\n$.fn[NAME].Constructor = MetisMenu; // eslint-disable-line no-param-reassign\n$.fn[NAME].noConflict = () => {\n  // eslint-disable-line no-param-reassign\n  $.fn[NAME] = JQUERY_NO_CONFLICT; // eslint-disable-line no-param-reassign\n  return MetisMenu.jQueryInterface;\n};\n\nexport default MetisMenu;\n"],"names":["Util","$","TRANSITION_END","triggerTransitionEnd","element","trigger","supportsTransitionEnd","Boolean","getSpecialTransitionEndEvent","bindType","delegateType","handle","event","target","is","handleObj","handler","apply","arguments","undefined","transitionEndEmulator","duration","called","one","setTimeout","setTransitionEndSupport","fn","mmEmulateTransitionEnd","special","NAME","DATA_KEY","EVENT_KEY","DATA_API_KEY","JQUERY_NO_CONFLICT","TRANSITION_DURATION","Default","toggle","preventDefault","triggerElement","parentTrigger","subMenu","Event","SHOW","SHOWN","HIDE","HIDDEN","CLICK_DATA_API","ClassName","METIS","ACTIVE","COLLAPSE","COLLAPSING","COLLAPSED","MetisMenu","config","transitioning","init","self","conf","addClass","find","children","attr","parents","on","eTar","parentTar","last","parent","hasClass","not","removeClass","has","e","paRent","sibLings","siblings","List","hide","show","onTransitionStart","elem","startEvent","isDefaultPrevented","toggleElem","height","setTransitioning","complete","scrollHeight","offsetHeight","onTransitionEnd","css","isTransitioning","dispose","removeData","off","jQueryInterface","each","$this","data","Error","Constructor","noConflict"],"mappings":"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"}